<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Support Chat - Market Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f1f5f9;
        }
        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }
        .bg-grid {
            background-size: 40px 40px;
            background-image: linear-gradient(to right, rgba(56, 189, 248, 0.05) 1px, transparent 1px),
                              linear-gradient(to bottom, rgba(56, 189, 248, 0.05) 1px, transparent 1px);
        }
        .message-enter {
            animation: messageSlide 0.3s ease-out forwards;
        }
        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .typing-indicator span {
            animation: typing 1.4s infinite;
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #64748b;
            border-radius: 50%;
            margin: 0 2px;
        }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-8px); }
        }
        .suggestion-btn {
            transition: all 0.2s ease;
        }
        .suggestion-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(56, 189, 248, 0.2);
        }
    </style>
</head>
<body class="antialiased bg-grid min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="w-full bg-slate-900/80 backdrop-blur-xl border-b border-white/5">
        <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <a href="/" class="flex items-center gap-2 group">
                    <div class="w-8 h-8 flex items-center justify-center bg-gradient-to-tr from-sky-500 to-emerald-500 rounded-lg">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                    </div>
                    <span class="text-lg font-bold text-white">MARKET<span class="text-sky-400">TERMINAL</span></span>
                </a>
                <span class="px-2 py-0.5 rounded-full bg-sky-500/20 text-sky-400 text-xs font-bold">AI CHAT</span>
            </div>
            <div class="flex items-center gap-4">
                <!-- Language Selector -->
                <div class="relative">
                    <select id="language-select" onchange="changeLanguage(this.value)" class="appearance-none bg-slate-800 border border-slate-700 text-white text-sm rounded-lg px-4 py-2 pr-8 focus:outline-none focus:border-sky-500 cursor-pointer">
                        <option value="en">üá∫üá∏ English</option>
                        <option value="es">üá™üá∏ Espa√±ol</option>
                        <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                        <option value="fr">üá´üá∑ Fran√ßais</option>
                    </select>
                    <svg class="w-4 h-4 absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <a href="/" class="text-slate-400 hover:text-white text-sm transition flex items-center gap-1">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    <span id="nav-back">Back to Home</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Chat Container -->
    <div class="flex-1 flex flex-col max-w-4xl mx-auto w-full p-6">
        <!-- Chat Header -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-tr from-sky-500 to-emerald-500 mb-4">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
            </div>
            <h1 id="chat-title" class="text-2xl font-bold mb-2">Market Terminal AI Assistant</h1>
            <p id="chat-subtitle" class="text-slate-400">Ask me anything about Market Terminal - features, installation, pricing, safety, and more!</p>
        </div>

        <!-- Chat Messages -->
        <div id="chat-messages" class="flex-1 bg-slate-800/50 border border-slate-700 rounded-2xl p-6 overflow-y-auto mb-6 min-h-[400px] max-h-[500px] space-y-4">
            <!-- Initial Bot Message -->
            <div class="flex flex-col items-start message-enter">
                <div class="flex items-start gap-3">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-sky-500 to-emerald-500 flex items-center justify-center flex-shrink-0">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    </div>
                    <div class="bg-slate-700 text-slate-200 px-4 py-3 rounded-2xl rounded-tl-md text-sm max-w-[80%]" id="welcome-message">
                        üëã Hello! I'm the Market Terminal AI Assistant. I can help you with:
                        <ul class="mt-2 space-y-1 list-disc list-inside text-slate-300">
                            <li>Features and capabilities</li>
                            <li>Download and installation</li>
                            <li>System requirements</li>
                            <li>Safety and security</li>
                            <li>Licensing and redistribution</li>
                        </ul>
                        <p class="mt-2">How can I assist you today?</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Suggestions -->
        <div class="mb-4">
            <p id="suggestions-label" class="text-xs text-slate-500 mb-2">Quick questions:</p>
            <div class="flex flex-wrap gap-2" id="suggestions-container">
                <button onclick="askQuestion('features')" class="suggestion-btn px-3 py-1.5 bg-slate-800 border border-slate-700 rounded-full text-xs text-slate-300 hover:border-sky-500 hover:text-sky-400">
                    <span data-suggestion="features">What are the features?</span>
                </button>
                <button onclick="askQuestion('download')" class="suggestion-btn px-3 py-1.5 bg-slate-800 border border-slate-700 rounded-full text-xs text-slate-300 hover:border-sky-500 hover:text-sky-400">
                    <span data-suggestion="download">How to download?</span>
                </button>
                <button onclick="askQuestion('safety')" class="suggestion-btn px-3 py-1.5 bg-slate-800 border border-slate-700 rounded-full text-xs text-slate-300 hover:border-emerald-500 hover:text-emerald-400">
                    <span data-suggestion="safety">Is it safe?</span>
                </button>
                <button onclick="askQuestion('redistribute')" class="suggestion-btn px-3 py-1.5 bg-slate-800 border border-slate-700 rounded-full text-xs text-slate-300 hover:border-red-500 hover:text-red-400">
                    <span data-suggestion="redistribute">Can I redistribute?</span>
                </button>
                <button onclick="askQuestion('pricing')" class="suggestion-btn px-3 py-1.5 bg-slate-800 border border-slate-700 rounded-full text-xs text-slate-300 hover:border-purple-500 hover:text-purple-400">
                    <span data-suggestion="pricing">Is it free?</span>
                </button>
                <button onclick="askQuestion('support')" class="suggestion-btn px-3 py-1.5 bg-slate-800 border border-slate-700 rounded-full text-xs text-slate-300 hover:border-amber-500 hover:text-amber-400">
                    <span data-suggestion="support">Get support</span>
                </button>
            </div>
        </div>

        <!-- Chat Input -->
        <form onsubmit="handleChat(event)" class="flex gap-3">
            <input type="text" id="chat-input" placeholder="Type your question..." class="flex-1 bg-slate-800 border border-slate-700 rounded-xl px-5 py-4 text-white focus:outline-none focus:border-sky-500 transition text-sm">
            <button type="submit" class="bg-sky-500 hover:bg-sky-400 text-slate-900 px-6 py-4 rounded-xl transition font-bold flex items-center gap-2">
                <span id="send-text">Send</span>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
            </button>
        </form>
    </div>

    <!-- Footer -->
    <footer class="py-6 border-t border-slate-800 text-center text-slate-500 text-sm">
        <p>&copy; 2024 Market Terminal Project. All rights reserved.</p>
    </footer>

    <script>
        // Multi-language support
        let currentLanguage = 'en';

        const translations = {
            en: {
                navBack: 'Back to Home',
                chatTitle: 'Market Terminal AI Assistant',
                chatSubtitle: 'Ask me anything about Market Terminal - features, installation, pricing, safety, and more!',
                suggestionsLabel: 'Quick questions:',
                sendText: 'Send',
                inputPlaceholder: 'Type your question...',
                suggestions: {
                    features: 'What are the features?',
                    download: 'How to download?',
                    requirements: 'System requirements?',
                    pricing: 'Is it free?',
                    safety: 'Is it safe?',
                    redistribute: 'Can I redistribute?',
                    support: 'Get support'
                },
                welcomeMessage: `üëã Hello! I'm the Market Terminal AI Assistant. I can help you with:<ul class="mt-2 space-y-1 list-disc list-inside text-slate-300"><li>Features and capabilities</li><li>Download and installation</li><li>System requirements</li><li>Safety and security</li><li>Licensing and redistribution</li></ul><p class="mt-2">How can I assist you today?</p>`,
                responses: {
                    features: "Market Terminal offers: \n\nüìä **Real-Time Data** - Live market feeds via YFinance with intraday charts (1m, 5m, 15m)\n\n‚òÅÔ∏è **Cloud Sync** - Secure portfolio sync via Supabase\n\nüí∞ **Portfolio Management** - Track holdings, P&L, and export to CSV\n\nüéÆ **Trial Mode** - Risk-free trading simulation",
                    download: "You can download Market Terminal from our homepage. Click the 'Download for Windows' button. For Mac/Linux users, you can run the Python source code directly!",
                    requirements: "System Requirements:\n\n‚Ä¢ Python 3.8 or higher\n‚Ä¢ Libraries: pandas, yfinance, matplotlib, supabase\n‚Ä¢ Windows 10/11 (for packaged app)\n‚Ä¢ Mac/Linux can run source code",
                    pricing: "Yes! Market Terminal is 100% FREE and open source for personal use. No hidden fees, no subscriptions.",
                    trial: "Trial Mode lets you practice trading with simulated stocks (SIM-ALPHA, SIM-BETA) in a realistic environment. Perfect for beginners!",
                    safety: "üõ°Ô∏è Market Terminal is 100% SAFE and virus-free!\n\n‚Ä¢ Open source - inspect every line of code\n‚Ä¢ Uses only trusted libraries (pandas, yfinance, matplotlib, supabase)\n‚Ä¢ No data collection or telemetry\n‚Ä¢ Your antivirus may flag it as 'unknown' - this is a false positive since we're not a major publisher",
                    redistribute: "‚ö†Ô∏è NO - Redistribution is NOT allowed!\n\n‚Ä¢ Licensed for PERSONAL USE ONLY\n‚Ä¢ You may NOT modify and redistribute\n‚Ä¢ You may NOT resell or commercialize\n‚Ä¢ You may NOT include in other products\n‚Ä¢ Source code is viewable for transparency only\n\nAll rights reserved by the original author.",
                    support: "üìß Need help? Here's how to get support:\n\n‚Ä¢ Visit our GitHub Issues page\n‚Ä¢ Use this AI Chat for quick answers\n‚Ä¢ Response time: 24-48 hours\n‚Ä¢ Check the Docs section on our homepage",
                    default: "I'm not sure about that. Try asking about 'features', 'download', 'requirements', 'pricing', 'safety', or 'redistribution'."
                }
            },
            es: {
                navBack: 'Volver al Inicio',
                chatTitle: 'Asistente IA de Market Terminal',
                chatSubtitle: 'Preg√∫ntame sobre Market Terminal - funciones, instalaci√≥n, precios, seguridad y m√°s!',
                suggestionsLabel: 'Preguntas r√°pidas:',
                sendText: 'Enviar',
                inputPlaceholder: 'Escribe tu pregunta...',
                suggestions: {
                    features: '¬øCu√°les son las funciones?',
                    download: '¬øC√≥mo descargar?',
                    requirements: '¬øRequisitos del sistema?',
                    pricing: '¬øEs gratis?',
                    safety: '¬øEs seguro?',
                    redistribute: '¬øPuedo redistribuir?',
                    support: 'Obtener soporte'
                },
                welcomeMessage: `üëã ¬°Hola! Soy el Asistente IA de Market Terminal. Puedo ayudarte con:<ul class="mt-2 space-y-1 list-disc list-inside text-slate-300"><li>Funciones y capacidades</li><li>Descarga e instalaci√≥n</li><li>Requisitos del sistema</li><li>Seguridad y protecci√≥n</li><li>Licencia y redistribuci√≥n</li></ul><p class="mt-2">¬øC√≥mo puedo ayudarte hoy?</p>`,
                responses: {
                    features: "Market Terminal ofrece:\n\nüìä **Datos en Tiempo Real** - Feeds de mercado en vivo via YFinance con gr√°ficos intrad√≠a\n\n‚òÅÔ∏è **Sincronizaci√≥n en la Nube** - Sincronizaci√≥n segura via Supabase\n\nüí∞ **Gesti√≥n de Portafolio** - Rastrea holdings, P&L y exporta a CSV\n\nüéÆ **Modo Prueba** - Simulaci√≥n de trading sin riesgo",
                    download: "Puedes descargar Market Terminal desde nuestra p√°gina principal. ¬°Haz clic en 'Descargar para Windows'. Para usuarios de Mac/Linux, pueden ejecutar el c√≥digo fuente en Python!",
                    requirements: "Requisitos del Sistema:\n\n‚Ä¢ Python 3.8 o superior\n‚Ä¢ Librer√≠as: pandas, yfinance, matplotlib, supabase\n‚Ä¢ Windows 10/11 (para app empaquetada)\n‚Ä¢ Mac/Linux pueden ejecutar c√≥digo fuente",
                    pricing: "¬°S√≠! Market Terminal es 100% GRATIS y c√≥digo abierto para uso personal. Sin tarifas ocultas, sin suscripciones.",
                    trial: "El Modo Prueba te permite practicar trading con acciones simuladas (SIM-ALPHA, SIM-BETA) en un entorno realista. ¬°Perfecto para principiantes!",
                    safety: "üõ°Ô∏è Market Terminal es 100% SEGURO y libre de virus!\n\n‚Ä¢ C√≥digo abierto - inspecciona cada l√≠nea\n‚Ä¢ Usa solo librer√≠as confiables (pandas, yfinance, matplotlib, supabase)\n‚Ä¢ Sin recolecci√≥n de datos ni telemetr√≠a\n‚Ä¢ Tu antivirus puede marcarlo como 'desconocido' - es un falso positivo",
                    redistribute: "‚ö†Ô∏è NO - ¬°La redistribuci√≥n NO est√° permitida!\n\n‚Ä¢ Licenciado solo para USO PERSONAL\n‚Ä¢ NO puedes modificar y redistribuir\n‚Ä¢ NO puedes revender o comercializar\n‚Ä¢ NO puedes incluir en otros productos\n‚Ä¢ El c√≥digo fuente es visible solo para transparencia\n\nTodos los derechos reservados.",
                    support: "üìß ¬øNecesitas ayuda? C√≥mo obtener soporte:\n\n‚Ä¢ Visita nuestra p√°gina de Issues en GitHub\n‚Ä¢ Usa este Chat IA para respuestas r√°pidas\n‚Ä¢ Tiempo de respuesta: 24-48 horas\n‚Ä¢ Revisa la secci√≥n de Docs en nuestra p√°gina",
                    default: "No estoy seguro de eso. Intenta preguntar sobre 'funciones', 'descarga', 'requisitos', 'precios', 'seguridad' o 'redistribuci√≥n'."
                }
            },
            hi: {
                navBack: '‡§π‡•ã‡§Æ ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç',
                chatTitle: '‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü ‡§ü‡§∞‡•ç‡§Æ‡§ø‡§®‡§≤ AI ‡§∏‡§π‡§æ‡§Ø‡§ï',
                chatSubtitle: '‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü ‡§ü‡§∞‡•ç‡§Æ‡§ø‡§®‡§≤ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§™‡•Ç‡§õ‡•á‡§Ç - ‡§´‡•Ä‡§ö‡§∞‡•ç‡§∏, ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤‡•á‡§∂‡§®, ‡§ï‡•Ä‡§Æ‡§§, ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§≠‡•Ä ‡§¨‡§π‡•Å‡§§ ‡§ï‡•Å‡§õ!',
                suggestionsLabel: '‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®:',
                sendText: '‡§≠‡•á‡§ú‡•á‡§Ç',
                inputPlaceholder: '‡§Ö‡§™‡§®‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§≤‡§ø‡§ñ‡•á‡§Ç...',
                suggestions: {
                    features: '‡§´‡•Ä‡§ö‡§∞‡•ç‡§∏ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à‡§Ç?',
                    download: '‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡•à‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç?',
                    requirements: '‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ‡§è‡§Ç?',
                    pricing: '‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§Æ‡•Å‡§´‡•ç‡§§ ‡§π‡•à?',
                    safety: '‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§π‡•à?',
                    redistribute: '‡§ï‡•ç‡§Ø‡§æ ‡§Æ‡•à‡§Ç ‡§µ‡§ø‡§§‡§∞‡§ø‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç?',
                    support: '‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç'
                },
                welcomeMessage: `üëã ‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü ‡§ü‡§∞‡•ç‡§Æ‡§ø‡§®‡§≤ AI ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Ç‡•§ ‡§Æ‡•à‡§Ç ‡§á‡§®‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç:<ul class="mt-2 space-y-1 list-disc list-inside text-slate-300"><li>‡§´‡•Ä‡§ö‡§∞‡•ç‡§∏ ‡§î‡§∞ ‡§ï‡•ç‡§∑‡§Æ‡§§‡§æ‡§è‡§Ç</li><li>‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§î‡§∞ ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤‡•á‡§∂‡§®</li><li>‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ‡§è‡§Ç</li><li>‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£</li><li>‡§≤‡§æ‡§á‡§∏‡•á‡§Ç‡§∏ ‡§î‡§∞ ‡§µ‡§ø‡§§‡§∞‡§£</li></ul><p class="mt-2">‡§Ü‡§ú ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•à‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç?</p>`,
                responses: {
                    features: "‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü ‡§ü‡§∞‡•ç‡§Æ‡§ø‡§®‡§≤ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§§‡§æ ‡§π‡•à:\n\nüìä **‡§∞‡§ø‡§Ø‡§≤-‡§ü‡§æ‡§á‡§Æ ‡§°‡•á‡§ü‡§æ** - YFinance ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§≤‡§æ‡§á‡§µ ‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü ‡§´‡•Ä‡§°‡•ç‡§∏\n\n‚òÅÔ∏è **‡§ï‡•ç‡§≤‡§æ‡§â‡§° ‡§∏‡§ø‡§Ç‡§ï** - Supabase ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∏‡§ø‡§Ç‡§ï\n\nüí∞ **‡§™‡•ã‡§∞‡•ç‡§ü‡§´‡•ã‡§≤‡§ø‡§Ø‡•ã ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®** - ‡§π‡•ã‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó‡•ç‡§∏, P&L ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ CSV ‡§Æ‡•á‡§Ç ‡§è‡§ï‡•ç‡§∏‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç\n\nüéÆ **‡§ü‡•ç‡§∞‡§æ‡§Ø‡§≤ ‡§Æ‡•ã‡§°** - ‡§ú‡•ã‡§ñ‡§ø‡§Æ-‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§ü‡•ç‡§∞‡•á‡§°‡§ø‡§Ç‡§ó ‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§∂‡§®",
                    download: "‡§Ü‡§™ ‡§π‡§Æ‡§æ‡§∞‡•á ‡§π‡•ã‡§Æ‡§™‡•á‡§ú ‡§∏‡•á ‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü ‡§ü‡§∞‡•ç‡§Æ‡§ø‡§®‡§≤ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ 'Windows ‡§ï‡•á ‡§≤‡§ø‡§è ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç' ‡§¨‡§ü‡§® ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§ Mac/Linux ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§∏‡•Ä‡§ß‡•á Python ‡§∏‡•ã‡§∞‡•ç‡§∏ ‡§ï‡•ã‡§° ‡§ö‡§≤‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç!",
                    requirements: "‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ‡§è‡§Ç:\n\n‚Ä¢ Python 3.8 ‡§Ø‡§æ ‡§â‡§∏‡§∏‡•á ‡§ä‡§™‡§∞\n‚Ä¢ ‡§≤‡§æ‡§á‡§¨‡•ç‡§∞‡•á‡§∞‡•Ä: pandas, yfinance, matplotlib, supabase\n‚Ä¢ Windows 10/11 (‡§™‡•à‡§ï‡•á‡§ú‡•ç‡§° ‡§ê‡§™ ‡§ï‡•á ‡§≤‡§ø‡§è)\n‚Ä¢ Mac/Linux ‡§∏‡•ã‡§∞‡•ç‡§∏ ‡§ï‡•ã‡§° ‡§ö‡§≤‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç",
                    pricing: "‡§π‡§æ‡§Ç! ‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü ‡§ü‡§∞‡•ç‡§Æ‡§ø‡§®‡§≤ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è 100% ‡§Æ‡•Å‡§´‡•ç‡§§ ‡§î‡§∞ ‡§ì‡§™‡§® ‡§∏‡•ã‡§∞‡•ç‡§∏ ‡§π‡•à‡•§ ‡§ï‡•ã‡§à ‡§õ‡§ø‡§™‡•Ä ‡§´‡•Ä‡§∏ ‡§®‡§π‡•Ä‡§Ç, ‡§ï‡•ã‡§à ‡§∏‡§¨‡•ç‡§∏‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§∂‡§® ‡§®‡§π‡•Ä‡§Ç‡•§",
                    trial: "‡§ü‡•ç‡§∞‡§æ‡§Ø‡§≤ ‡§Æ‡•ã‡§° ‡§Ü‡§™‡§ï‡•ã ‡§∏‡§ø‡§Æ‡•ç‡§Ø‡•Å‡§≤‡•á‡§ü‡•á‡§° ‡§∏‡•ç‡§ü‡•â‡§ï‡•ç‡§∏ (SIM-ALPHA, SIM-BETA) ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ø‡§•‡§æ‡§∞‡•ç‡§•‡§µ‡§æ‡§¶‡•Ä ‡§µ‡§æ‡§§‡§æ‡§µ‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§ü‡•ç‡§∞‡•á‡§°‡§ø‡§Ç‡§ó ‡§ï‡§æ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡§®‡•á ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§ ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§‡•Ä ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§∏‡§π‡•Ä!",
                    safety: "üõ°Ô∏è ‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü ‡§ü‡§∞‡•ç‡§Æ‡§ø‡§®‡§≤ 100% ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§î‡§∞ ‡§µ‡§æ‡§Ø‡§∞‡§∏-‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§π‡•à!\n\n‚Ä¢ ‡§ì‡§™‡§® ‡§∏‡•ã‡§∞‡•ç‡§∏ - ‡§π‡§∞ ‡§≤‡§æ‡§á‡§® ‡§ï‡§æ ‡§®‡§ø‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç\n‚Ä¢ ‡§ï‡•á‡§µ‡§≤ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø ‡§≤‡§æ‡§á‡§¨‡•ç‡§∞‡•á‡§∞‡•Ä ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó (pandas, yfinance, matplotlib, supabase)\n‚Ä¢ ‡§ï‡•ã‡§à ‡§°‡•á‡§ü‡§æ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π ‡§Ø‡§æ ‡§ü‡•á‡§≤‡•Ä‡§Æ‡•á‡§ü‡•ç‡§∞‡•Ä ‡§®‡§π‡•Ä‡§Ç\n‚Ä¢ ‡§Ü‡§™‡§ï‡§æ ‡§è‡§Ç‡§ü‡•Ä‡§µ‡§æ‡§Ø‡§∞‡§∏ ‡§á‡§∏‡•á '‡§Ö‡§ú‡•ç‡§û‡§æ‡§§' ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§ö‡§ø‡§π‡•ç‡§®‡§ø‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à - ‡§Ø‡§π ‡§ù‡•Ç‡§†‡•Ä ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§π‡•à",
                    redistribute: "‚ö†Ô∏è ‡§®‡§π‡•Ä‡§Ç - ‡§™‡•Å‡§®‡§∞‡•ç‡§µ‡§ø‡§§‡§∞‡§£ ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à!\n\n‚Ä¢ ‡§ï‡•á‡§µ‡§≤ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡§æ‡§á‡§∏‡•á‡§Ç‡§∏\n‚Ä¢ ‡§Ü‡§™ ‡§∏‡§Ç‡§∂‡•ã‡§ß‡§ø‡§§ ‡§î‡§∞ ‡§™‡•Å‡§®‡§∞‡•ç‡§µ‡§ø‡§§‡§∞‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á\n‚Ä¢ ‡§Ü‡§™ ‡§™‡•Å‡§®‡§∞‡•ç‡§µ‡§ø‡§ï‡•ç‡§∞‡§Ø ‡§Ø‡§æ ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡•Ä‡§ï‡§∞‡§£ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á\n‚Ä¢ ‡§Ü‡§™ ‡§Ö‡§®‡•ç‡§Ø ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á\n‚Ä¢ ‡§∏‡•ã‡§∞‡•ç‡§∏ ‡§ï‡•ã‡§° ‡§ï‡•á‡§µ‡§≤ ‡§™‡§æ‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¶‡•á‡§ñ‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§π‡•à\n\n‡§∏‡§≠‡•Ä ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§Æ‡•Ç‡§≤ ‡§≤‡•á‡§ñ‡§ï ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§‡•§",
                    support: "üìß ‡§Æ‡§¶‡§¶ ‡§ö‡§æ‡§π‡§ø‡§è? ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•à‡§∏‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç:\n\n‚Ä¢ ‡§π‡§Æ‡§æ‡§∞‡•á GitHub Issues ‡§™‡•á‡§ú ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç\n‚Ä¢ ‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§â‡§§‡•ç‡§§‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§á‡§∏ AI Chat ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç\n‚Ä¢ ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∏‡§Æ‡§Ø: 24-48 ‡§ò‡§Ç‡§ü‡•á\n‚Ä¢ ‡§π‡§Æ‡§æ‡§∞‡•á ‡§π‡•ã‡§Æ‡§™‡•á‡§ú ‡§™‡§∞ Docs ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç",
                    default: "‡§Æ‡•Å‡§ù‡•á ‡§á‡§∏‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ '‡§´‡•Ä‡§ö‡§∞‡•ç‡§∏', '‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§°', '‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ‡§è‡§Ç', '‡§ï‡•Ä‡§Æ‡§§', '‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ' ‡§Ø‡§æ '‡§µ‡§ø‡§§‡§∞‡§£' ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡§®‡•á ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§"
                }
            },
            fr: {
                navBack: 'Retour √† l\'accueil',
                chatTitle: 'Assistant IA Market Terminal',
                chatSubtitle: 'Posez-moi des questions sur Market Terminal - fonctionnalit√©s, installation, tarifs, s√©curit√© et plus!',
                suggestionsLabel: 'Questions rapides:',
                sendText: 'Envoyer',
                inputPlaceholder: 'Tapez votre question...',
                suggestions: {
                    features: 'Quelles sont les fonctionnalit√©s?',
                    download: 'Comment t√©l√©charger?',
                    requirements: 'Configuration requise?',
                    pricing: 'Est-ce gratuit?',
                    safety: 'Est-ce s√©curis√©?',
                    redistribute: 'Puis-je redistribuer?',
                    support: 'Obtenir de l\'aide'
                },
                welcomeMessage: `üëã Bonjour! Je suis l'Assistant IA de Market Terminal. Je peux vous aider avec:<ul class="mt-2 space-y-1 list-disc list-inside text-slate-300"><li>Fonctionnalit√©s et capacit√©s</li><li>T√©l√©chargement et installation</li><li>Configuration requise</li><li>S√©curit√© et protection</li><li>Licence et redistribution</li></ul><p class="mt-2">Comment puis-je vous aider aujourd'hui?</p>`,
                responses: {
                    features: "Market Terminal offre:\n\nüìä **Donn√©es en Temps R√©el** - Flux de march√© en direct via YFinance avec graphiques intrajournaliers\n\n‚òÅÔ∏è **Synchronisation Cloud** - Synchronisation s√©curis√©e via Supabase\n\nüí∞ **Gestion de Portefeuille** - Suivez vos positions, P&L et exportez en CSV\n\nüéÆ **Mode Essai** - Simulation de trading sans risque",
                    download: "Vous pouvez t√©l√©charger Market Terminal depuis notre page d'accueil. Cliquez sur 'T√©l√©charger pour Windows'. Les utilisateurs Mac/Linux peuvent ex√©cuter le code source Python directement!",
                    requirements: "Configuration Requise:\n\n‚Ä¢ Python 3.8 ou sup√©rieur\n‚Ä¢ Biblioth√®ques: pandas, yfinance, matplotlib, supabase\n‚Ä¢ Windows 10/11 (pour l'app packag√©e)\n‚Ä¢ Mac/Linux peuvent ex√©cuter le code source",
                    pricing: "Oui! Market Terminal est 100% GRATUIT et open source pour un usage personnel. Pas de frais cach√©s, pas d'abonnements.",
                    trial: "Le Mode Essai vous permet de pratiquer le trading avec des actions simul√©es (SIM-ALPHA, SIM-BETA) dans un environnement r√©aliste. Parfait pour les d√©butants!",
                    safety: "üõ°Ô∏è Market Terminal est 100% S√õR et sans virus!\n\n‚Ä¢ Open source - inspectez chaque ligne de code\n‚Ä¢ Utilise uniquement des biblioth√®ques fiables (pandas, yfinance, matplotlib, supabase)\n‚Ä¢ Pas de collecte de donn√©es ni de t√©l√©m√©trie\n‚Ä¢ Votre antivirus peut le signaler comme 'inconnu' - c'est un faux positif",
                    redistribute: "‚ö†Ô∏è NON - La redistribution N'EST PAS autoris√©e!\n\n‚Ä¢ Licence pour USAGE PERSONNEL uniquement\n‚Ä¢ Vous NE pouvez PAS modifier et redistribuer\n‚Ä¢ Vous NE pouvez PAS revendre ou commercialiser\n‚Ä¢ Vous NE pouvez PAS inclure dans d'autres produits\n‚Ä¢ Le code source est visible uniquement pour la transparence\n\nTous droits r√©serv√©s par l'auteur original.",
                    support: "üìß Besoin d'aide? Comment obtenir du support:\n\n‚Ä¢ Visitez notre page GitHub Issues\n‚Ä¢ Utilisez ce Chat IA pour des r√©ponses rapides\n‚Ä¢ Temps de r√©ponse: 24-48 heures\n‚Ä¢ Consultez la section Docs sur notre page d'accueil",
                    default: "Je ne suis pas s√ªr de cela. Essayez de poser des questions sur 'fonctionnalit√©s', 't√©l√©chargement', 'configuration', 'prix', 's√©curit√©' ou 'redistribution'."
                }
            }
        };

        function changeLanguage(lang) {
            currentLanguage = lang;
            const t = translations[lang];
            
            // Update UI elements
            document.getElementById('nav-back').textContent = t.navBack;
            document.getElementById('chat-title').textContent = t.chatTitle;
            document.getElementById('chat-subtitle').textContent = t.chatSubtitle;
            document.getElementById('suggestions-label').textContent = t.suggestionsLabel;
            document.getElementById('send-text').textContent = t.sendText;
            document.getElementById('chat-input').placeholder = t.inputPlaceholder;
            
            // Update suggestion buttons
            document.querySelector('[data-suggestion="features"]').textContent = t.suggestions.features;
            document.querySelector('[data-suggestion="download"]').textContent = t.suggestions.download;
            document.querySelector('[data-suggestion="safety"]').textContent = t.suggestions.safety;
            document.querySelector('[data-suggestion="redistribute"]').textContent = t.suggestions.redistribute;
            document.querySelector('[data-suggestion="pricing"]').textContent = t.suggestions.pricing;
            document.querySelector('[data-suggestion="support"]').textContent = t.suggestions.support;
            
            // Update welcome message
            document.getElementById('welcome-message').innerHTML = t.welcomeMessage;
        }

        function askQuestion(type) {
            const t = translations[currentLanguage];
            const question = t.suggestions[type];
            addMessage(question, 'user');
            
            setTimeout(() => {
                const response = t.responses[type] || t.responses.default;
                addMessage(response, 'bot');
            }, 600);
        }

        function handleChat(e) {
            e.preventDefault();
            const input = document.getElementById('chat-input');
            const msg = input.value.trim();
            if (!msg) return;

            addMessage(msg, 'user');
            input.value = '';

            // Show typing indicator
            showTyping();

            setTimeout(() => {
                hideTyping();
                const response = getResponse(msg.toLowerCase());
                addMessage(response, 'bot');
            }, 800);
        }

        function getResponse(msg) {
            const t = translations[currentLanguage];
            
            // Keywords for each language
            const keywords = {
                features: ['feature', 'funci√≥n', 'funciones', '‡§´‡•Ä‡§ö‡§∞', 'fonctionnalit√©', 'can do', 'capability', 'what can'],
                download: ['download', 'descargar', '‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§°', 't√©l√©charger', 'install', 'instalar', '‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤', 'installer', 'get app'],
                requirements: ['requirement', 'requisito', '‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ', 'configuration', 'python', 'library', 'librer√≠a', '‡§≤‡§æ‡§á‡§¨‡•ç‡§∞‡•á‡§∞‡•Ä', 'biblioth√®que'],
                pricing: ['free', 'gratis', '‡§Æ‡•Å‡§´‡•ç‡§§', 'gratuit', 'price', 'precio', '‡§ï‡•Ä‡§Æ‡§§', 'prix', 'cost', 'costo', 'pay'],
                trial: ['trial', 'prueba', '‡§ü‡•ç‡§∞‡§æ‡§Ø‡§≤', 'essai', 'simulation', 'simulaci√≥n', '‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§∂‡§®', 'practice', 'demo'],
                safety: ['virus', 'malware', 'safe', 'secure', 'trojan', 'seguro', '‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§', 's√ªr', 'security', 'seguridad', '‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ', 's√©curit√©', 'hack', 'spyware', 'dangerous'],
                redistribute: ['modify', 'redistribute', 'resell', 'commercial', 'sell', 'distribution', 'redistribuir', 'vender', 'comercial', '‡§µ‡§ø‡§§‡§∞‡§£', '‡§¨‡•á‡§ö‡§®‡§æ', 'redistribuer', 'vendre', 'license', 'licencia', '‡§≤‡§æ‡§á‡§∏‡•á‡§Ç‡§∏', 'licence', 'copy', 'copiar'],
                support: ['support', 'help', 'contact', 'issue', 'bug', 'ayuda', 'soporte', 'contacto', '‡§Æ‡§¶‡§¶', '‡§∏‡§π‡§æ‡§Ø‡§§‡§æ', 'aide', 'probl√®me']
            };
            
            for (const [key, words] of Object.entries(keywords)) {
                if (words.some(word => msg.includes(word))) {
                    return t.responses[key];
                }
            }
            
            return t.responses.default;
        }

        function addMessage(text, sender) {
            const container = document.getElementById('chat-messages');
            const div = document.createElement('div');
            div.className = `flex flex-col ${sender === 'user' ? 'items-end' : 'items-start'} message-enter`;
            
            if (sender === 'user') {
                div.innerHTML = `
                    <div class="bg-sky-500 text-slate-900 px-4 py-3 rounded-2xl rounded-tr-md text-sm max-w-[80%] font-medium">
                        ${escapeHtml(text)}
                    </div>
                `;
            } else {
                div.innerHTML = `
                    <div class="flex items-start gap-3">
                        <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-sky-500 to-emerald-500 flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                        </div>
                        <div class="bg-slate-700 text-slate-200 px-4 py-3 rounded-2xl rounded-tl-md text-sm max-w-[80%] whitespace-pre-line">
                            ${formatMessage(text)}
                        </div>
                    </div>
                `;
            }
            
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        function showTyping() {
            const container = document.getElementById('chat-messages');
            const div = document.createElement('div');
            div.id = 'typing-indicator';
            div.className = 'flex items-start gap-3 message-enter';
            div.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-sky-500 to-emerald-500 flex items-center justify-center flex-shrink-0">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                </div>
                <div class="bg-slate-700 px-4 py-3 rounded-2xl rounded-tl-md">
                    <div class="typing-indicator flex items-center gap-1">
                        <span></span><span></span><span></span>
                    </div>
                </div>
            `;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        function hideTyping() {
            const typing = document.getElementById('typing-indicator');
            if (typing) typing.remove();
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function formatMessage(text) {
            // Convert **bold** to <strong>
            return text.replace(/\*\*(.*?)\*\*/g, '<strong class="text-sky-400">$1</strong>');
        }
    </script>
</body>
</html>
